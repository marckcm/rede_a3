{% extends "base.html" %}

{% block content %}
<h1>Gerenciamento de Dispositivos</h1>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
{% endwith %}

<a href="{{ url_for('add_device') }}">Adicionar Dispositivo</a>

<table>
    <tr>
        <th>Nome do Dispositivo</th>
        <th>Tipo</th>
        <th>Endereço IP</th>
        <th>VLAN</th>
        <th>Configuração</th>
        <th>Observações</th>
        <th>Ações</th>
    </tr>
    {% for device in devices %}
    <tr>
        <td>{{ device.device_name }}</td>
        <td>{{ device.device_type }}</td>
        <td>{{ device.ip_address }}</td>
        <td>{{ device.vlan }}</td>
        <td>{{ device.configuration }}</td>
        <td>{{ device.notes }}</td>
        <td class="action-links">
            <a href="{{ url_for('edit_device', id=device.id) }}">Editar</a>
            <form class="delete-form" action="{{ url_for('delete_device', id=device.id) }}" method="POST">
                <button type="submit" class="delete-btn" 
                        onclick="return confirm('Tem certeza que deseja deletar {{ device.device_name }}?')">
                    Deletar
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}